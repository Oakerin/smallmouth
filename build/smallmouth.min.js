/*! smallmouth v0.0.1 */
var SmallMouth;!function(a){function b(a,b){b||(b={});for(var c=a.split("/"),d=j,e=0,f=c.length;f>e;e++)d.children[c[e]]||(d.children[c[e]]={children:{},version:0}),b.versionUpdate&&d.version++,d=d.children[c[e]];return d}function c(a,c){var d=b(a._path,{versionUpdate:!0});d.data=c,d.version++,e(a)}function d(a){var c=b(a._path);a.data=c.data,e(a)}function e(){g&&clearTimeout(g),g=setTimeout(function(){localStorage.setItem("LargeMouth_Registry",JSON.stringify(j))},100)}function f(){j.data=null,j.children={},j.version=0,localStorage.setItem("LargeMouth_Registry",JSON.stringify(j))}var g,h=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(([^#]*))?(#(.*))?"),i={},j=JSON.parse(localStorage.getItem("LargeMouth_Registry"))||{data:null,children:{},version:0};a.dataRegistry=j,a.resetRegistry=f;var k=function(){function a(a){this._callbacks=[];var b=h.exec(a),c=b[1],e=b[3],f=b[5],g=b[6],j=(c?c:"")+(e?e:""),k=this.cleanPath((f?f:"")+(g?g:"")),l=i[j];this._path=k,this._socket=l?l:l=i[j]=io.connect(j),d(this)}return a.prototype.on=function(a,b,c){var d=this;return this._callbacks.push({type:a,callback:function(){return b.call(c,d._getSnapshot())}}),this},a.prototype.set=function(a){return c(this,a),this},a.prototype.cleanPath=function(a){return a="/"===a.charAt(0)?a.substring(1):a},a.prototype._getSnapshot=function(){return b(this._path)},a}();a.Resource=k}(SmallMouth||(SmallMouth={}));