/*! smallmouth v0.0.1 */
var SmallMouth;!function(a){function b(a,b){if(b||(b={}),""==a.trim())return h;for(var c=a.split("/"),d=h,e=0,f=c.length;f>e;e++)d.children[c[e]]||(d.children[c[e]]={children:{},version:0}),b.versionUpdate&&d.version++,d=d.children[c[e]];return d}function c(a,c){var d=b(a._path,{versionUpdate:!0});d.data=c,d.version++,e(a)}function d(a){var c=b(a._path);a.data=c.data,e(a)}function e(){g&&clearTimeout(g),g=setTimeout(function(){localStorage.setItem("LargeMouth_Registry",JSON.stringify(h))},100)}function f(){h.data=null,h.children={},h.version=0,localStorage.setItem("LargeMouth_Registry",JSON.stringify(h))}var g,h=JSON.parse(localStorage.getItem("LargeMouth_Registry"))||{data:null,children:{},version:0};a._registry={sync:e,initializeRegistry:d,updateRegistry:c,getData:b,dataRegistry:h,resetRegistry:f}}(SmallMouth||(SmallMouth={}));var SmallMouth;!function(a){var b=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(([^#]*))?(#(.*))?"),c={},d=function(){function d(d){this._callbacks=[];var e=b.exec(d),f=e[1],g=e[3],h=e[5],i=e[6],j=(f?f:"")+(g?g:""),k=this.cleanPath((h?h:"")+(i?i:"")),l=c[j];this._path=k,this._host=j,this._socket=l?l:l=c[j]=io.connect(j),a._registry.initializeRegistry(this)}return d.prototype.on=function(a,b,c,d){return this._callbacks.push({type:a,callback:function(){return b.call(d,null)}}),this},d.prototype.set=function(b){return a._registry.updateRegistry(this,b),this},d.prototype.child=function(a){return new d(this._host+"/"+this._path+"/"+this.cleanPath(a))},d.prototype.parent=function(){return new d(this._host+"/"+this._path.substring(0,this._path.lastIndexOf("/")))},d.prototype.cleanPath=function(a){return a="/"===a.charAt(0)?a.substring(1):a},d.prototype._getSnapshot=function(){return a._registry.getData(this._path)},d}();a.Resource=d}(SmallMouth||(SmallMouth={}));